<div class="mb-4 d-flex flex-column flex-md-row justify-content-between align-items-center">
    <%= link_to "Quay lại", food_drinks_path, class: "btn btn-outline-light mb-2 mb-md-0" %>
    <h1 class="text-center flex-grow-1 mb-0 text-light">Lịch sử đơn hàng</h1>
</div>

<div class="card shadow-lg rounded-4 bg-dark text-light">
    <div class="card-body p-0">
        <table class="table table-dark table-hover table-bordered mb-0 align-middle text-center">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Mã đơn hàng</th>
                    <th>Ngày đặt</th>
                    <th>Tổng tiền</th>
                    <th>Trạng thái</th>
                    <th>Hành động</th>
                </tr>
            </thead>
            <tbody>
                <% @orders.each_with_index do |order, index| %>
                <tr>
                    <th scope="row"><%= index + 1 %></th>
                    <td>#<%= order.id %></td>
                    <td><%= order.created_at.strftime("%d/%m/%Y %H:%M") %></td>
                    <td><%= number_to_currency(order.total_price, unit: "₫") %></td>
                    <td>
                        <% status_class = case order.status
                  when "pending" then "badge bg-warning text-dark"
                  when "confirmed" then "badge bg-primary"
                  when "delivered" then "badge bg-success"
                  when "cancelled" then "badge bg-danger"
                  else "badge bg-secondary"
                end %>
                        <span class="<%= status_class %>"><%= order.status_human %></span>
                    </td>
                    <td class="d-flex justify-content-center gap-2">
                        <%= link_to "Chi tiết", order_path(order), class: "btn btn-sm btn-outline-light" %>
                        <% if order.status == "pending" %>
                        <%= link_to "Hủy đơn",
                    cancel_order_path(order),
                    method: :patch,
                    data: { turbo_confirm: "Bạn có chắc chắn muốn hủy đơn hàng này?" },
                    class: "btn btn-sm btn-outline-danger" %>
                        <% else %>
                        <span class="btn btn-sm btn-outline-secondary disabled">Không thể hủy</span>
                        <% end %>
                    </td>
                </tr>
                <% end %>
            </tbody>
        </table>
    </div>
</div>


<style>
    /* Toàn bộ bảng dark-mode */
    .orders-table {
        background-color: #1e1e1e;
        color: #e0e0e0;
    }

    .orders-table thead {
        background-color: #343a40;
        color: #f8f9fa;
    }

    .orders-table tbody tr {
        background-color: #1e1e1e;
    }

    .table-dark.table-hover tbody tr:hover {
        background-color: #2c2c2c;
    }


    .orders-table th,
    .orders-table td {
        border: 1px solid #444;
        border-color: #444 !important;
    }
</style>