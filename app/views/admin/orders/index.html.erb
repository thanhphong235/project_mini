<!-- app/views/admin/orders/index.html.erb -->
<h1><%= link_to "Quay lại", admin_dashboard_path, class: "btn btn-outline-secondary" %> Danh sách Đơn hàng</h1>

<table class="table table-striped table-hover">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Người đặt</th>
            <th>Tổng tiền</th>
            <th>Trạng thái</th>
            <th>Ngày đặt</th>
            <th>Hành động</th>
        </tr>
    </thead>
    <tbody>
        <% @orders.each_with_index do |order, index| %>
        <tr>
            <td><%= index + 1 %></td>
            <td><%= order.user.name || order.user.email %></td>
            <td><%= number_to_currency(order.total_price, unit: "₫") %></td>
            <td><%= order.status_human %></td>
            <td><%= order.created_at.strftime("%d/%m/%Y %H:%M") %></td>
            <td class="d-flex">
                <%= link_to "Xem", admin_order_path(order), class: "btn btn-sm btn-outline-primary me-1" %>
                <%= button_to "Xóa", admin_order_path(order), method: :delete,
                data: { turbo_confirm: "Bạn có chắc chắn muốn xóa đơn hàng này?" },
                class: "btn btn-sm btn-outline-danger" %>
            </td>
        </tr>
        <% end %>
    </tbody>
</table>