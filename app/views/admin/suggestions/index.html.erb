<!-- Header -->
<div class="d-flex justify-content-between align-items-center mb-4">
    <%= link_to "Quay lại", admin_dashboard_path, class: "btn btn-outline-secondary" %>
    <h1 class="page-title text-center flex-grow-1 mb-0">Danh sách góp ý</h1>
</div>

<div class="suggestions-wrapper">
    <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>#</th>
                <th>Người gửi</th>
                <th>Tiêu đề</th>
                <th>Nội dung</th>
                <th>Trạng thái</th>
                <th>Ngày gửi</th>
                <th>Hành động</th>
            </tr>
        </thead>

        <tbody>
            <% @suggestions.each_with_index do |s, i| %>
            <tr>
                <td><%= i + 1 %></td>
                <td><%= s.user.name || s.user.email %></td>
                <td><%= s.title %></td>
                <td><%= truncate(s.content, length: 50) %></td>

                <td>
                    <span class="badge 
                        <%= case s.status
                            when 'approved' then 'bg-success'
                            when 'rejected' then 'bg-danger'
                            else 'bg-secondary'
                        end %>">
                        <%= case s.status
                            when 'approved' then 'Đã duyệt'
                            when 'rejected' then 'Từ chối'
                            else 'Đang chờ'
                        end %>
                    </span>
                </td>


                <td><%= s.created_at.strftime("%d/%m/%Y %H:%M") %></td>

                <td class="action-col">
                    <%= link_to "Xem", admin_suggestion_path(s), class: "btn btn-sm btn-info me-1" %>

                    <%= link_to "Sửa", edit_admin_suggestion_path(s), class: "btn btn-sm btn-warning me-1" %>

                    <%= link_to "Xóa", admin_suggestion_path(s),
              data: { turbo_method: :delete, turbo_confirm: "Xóa góp ý này?" },
              class: "btn btn-sm btn-danger" %>
                </td>
            </tr>
            <% end %>
        </tbody>
    </table>
</div>