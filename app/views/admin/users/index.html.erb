<div class="users-card shadow-lg rounded-4 p-4 animate-fade-in dark-panel">

    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
        <%= link_to "Quay l·∫°i", admin_dashboard_path, class: "btn btn-outline-light btn-anim mb-2" %>

        <h2 class="fw-bold text-center flex-grow-1 mb-0 title-text">
            Qu·∫£n l√Ω Ng∆∞·ªùi d√πng
        </h2>

        <div style="width:140px;"></div>
    </div>

    <!-- Flash messages -->
    <%= turbo_frame_tag "flash_messages" do %>
    <%= render "shared/flash" %>
    <% end %>

    <!-- TABLE -->
    <div class="table-responsive mt-4">
        <table class="table table-dark table-bordered table-hover align-middle text-center rounded-3 overflow-hidden">
            <thead class="table-header-dark">
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th>Role</th>
                    <th>Created At</th>
                    <th>Actions</th>
                </tr>
            </thead>

            <tbody>
                <% @users.each_with_index do |user, index| %>
                <tr class="animate-row" id="<%= dom_id(user) %>">
                    <td><%= index + 1 %></td>

                    <td class="text-start"><%= user.name.presence || user.email %></td>

                    <td class="text-start"><%= user.email %></td>

                    <td>
                        <span class="badge role-badge"><%= user.role %></span>
                    </td>

                    <td><%= user.created_at.strftime("%d/%m/%Y %H:%M") %></td>

                    <td>
                        <div class="d-flex justify-content-center gap-2 flex-wrap">

                            <%= link_to admin_user_path(user),
                                    class: "btn btn-sm btn-outline-info btn-anim", title: "Xem" do %>
                            <i class="bi bi-eye"></i> Xem
                            <% end %>

                            <%= link_to admin_user_path(user),
                                    data: { turbo_method: :delete, turbo_confirm: "B·∫°n ch·∫Øc ch·∫Øn mu·ªën x√≥a?" },
                                    class: "btn btn-sm btn-outline-danger btn-anim", title: "X√≥a" do %>
                            <i class="bi bi-trash"></i> X√≥a
                            <% end %>

                        </div>
                    </td>
                </tr>
                <% end %>
            </tbody>
        </table>
    </div>

</div>

<!-- DARK MODE CSS -->
<style>
    /* ===============================
   GLOBAL BACKGROUND
   =============================== */
    body {
        background-color: #0d0d0d !important;
        color: #e6e6e6 !important;
    }


    /* ===============================
   CARD
   =============================== */
    .dark-panel {
        background: #1a1a1a !important;
        border: 1px solid #2d2d2d !important;
        border-radius: 16px;
        transition: 0.3s ease;
    }

    .dark-panel:hover {
        transform: translateY(-2px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
    }


    /* ===============================
   HEADER TEXT
   =============================== */
    .title-text {
        color: #fff !important;
        letter-spacing: 0.5px;
        font-size: 1.5rem;
    }


    /* ===============================
   BUTTON
   =============================== */
    .btn-anim {
        transition: 0.2s ease;
    }

    .btn-anim:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 15px rgba(0, 123, 255, 0.25);
    }


    /* ===============================
   TABLE DARK MODE (‚úî THAY ƒê·ªîI CH√çNH ·ªû ƒê√ÇY)
   =============================== */

    /* Header b·∫£ng */
    .table-header-dark th {
        background: #111 !important;
        color: #fff !important;
    }

    /* N·ªÅn b·∫£ng */
    .table-dark {
        background: #1c1c1c !important;
        color: #ddd !important;
    }

    /* Hover */
    .table-hover tbody tr:hover {
        background-color: #252525 !important;
    }

    /* ============================================
   üìå FIX VI·ªÄN TR·∫ÆNG QUANH B·∫¢NG (ƒëo·∫°n c·∫ßn th√™m)
   ============================================ */
    .table,
    .table-bordered,
    .table-bordered> :not(caption)>*>* {
        border-color: #333 !important;
    }

    .table {
        background: #1a1a1a !important;
        border: 2px solid #222 !important;
        /* XO√Å vi·ªÅn tr·∫Øng */
    }

    .table td,
    .table th {
        background: #1a1a1a !important;
        color: #e6e6e6 !important;
    }

    /* Ph·∫ßn bao b·∫£ng (table-responsive) */
    .table-responsive {
        background: transparent !important;
        border: none !important;
    }

    .table-responsive .table {
        border-radius: 0 !important;
    }


    /* ===============================
   ROLE BADGE
   =============================== */
    .role-badge {
        background: #00bcd4;
        color: #000;
        font-weight: 600;
        padding: 5px 12px;
        border-radius: 10px;
    }


    /* ===============================
   ROW ANIMATION
   =============================== */
    .animate-row {
        transition: 0.2s ease;
    }

    .animate-row:hover {
        background-color: #2a2a2a !important;
    }


    /* ===============================
   FADE-IN
   =============================== */
    .animate-fade-in {
        animation: fadeIn 0.5s ease forwards;
        opacity: 0;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
</style>