<h1>
    <%= link_to "Quay lại", admin_dashboard_path, class: "btn btn-outline-secondary me-2" %>
    Danh sách Góp ý
</h1>

<table class="table table-striped table-hover mt-3 align-middle">
    <thead class="table-dark">
        <tr>
            <th>#</th>
            <th>Người gửi</th>
            <th>Tiêu đề</th>
            <th>Nội dung</th>
            <th>Trạng thái</th>
            <th>Ngày gửi</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <% @suggestions.each_with_index do |s, i| %>
        <tr>
            <td><%= i + 1 %></td>
            <td><%= s.user.name || s.user.email %></td>
            <td><%= s.title %></td>
            <td><%= truncate(s.content, length: 50) %></td>
            <td>
                <span class="badge 
            <%= case s.status
              when 'approved' then 'bg-success'
              when 'rejected' then 'bg-danger'
              else 'bg-secondary'
            end %>">
                    <%= s.status || 'pending' %>
                </span>
            </td>
            <td><%= s.created_at.strftime("%d/%m/%Y %H:%M") %></td>
            <td>
                <%= link_to "Xem", admin_suggestion_path(s), class: "btn btn-sm btn-info" %>
                <%= link_to "Sửa", edit_admin_suggestion_path(s), class: "btn btn-sm btn-warning" %>
                <%= link_to "Xóa", admin_suggestion_path(s),
              data: { turbo_method: :delete, turbo_confirm: "Xóa góp ý này?" },
              class: "btn btn-sm btn-danger" %>
            </td>
        </tr>
        <% end %>
    </tbody>
</table>