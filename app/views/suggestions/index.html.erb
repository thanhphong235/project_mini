<div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4">
    <%= link_to "Quay lại", food_drinks_path, class: "btn btn-outline-secondary mb-2 mb-md-0" %>
    <h1 class="text-center flex-grow-1 mb-0">Góp ý của tôi</h1>
</div>

<% if @suggestions.any? %>
<div class="card shadow-sm">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover table-striped align-middle mb-0">
                <thead class="table-dark">
                    <tr>
                        <th>#</th>
                        <th>Tên món / thức uống</th>
                        <th>Nội dung góp ý</th>
                        <th>Trạng thái</th>
                        <th>Ngày gửi</th>
                        <th class="text-center">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <% @suggestions.each_with_index do |s, index| %>
                    <tr>
                        <th scope="row"><%= index + 1 %></th>
                        <td><%= s.title %></td>
                        <td><%= truncate(s.content, length: 50) %></td>
                        <td>
                            <% status_class, status_text = case s.status
                  when "pending" then ["badge bg-warning text-dark", "Đang chờ"]
                  when "approved" then ["badge bg-success", "Đã xác nhận"]
                  when "rejected" then ["badge bg-secondary", "Đã từ chối"]
                  else ["badge bg-secondary", "Không xác định"]
                end %>
                            <span class="<%= status_class %>"><%= status_text %></span>
                        </td>
                        <td><%= s.created_at.strftime("%d/%m/%Y %H:%M") %></td>
                        <td class="text-center">
                            <%= link_to suggestion_path(s), class: "btn btn-sm btn-outline-info me-1", title: "Xem chi tiết" do %>
                            <i class="bi bi-eye"></i>
                            <% end %>

                            <% if s.status == "pending" %>
                            <%= link_to edit_suggestion_path(s), class: "btn btn-sm btn-outline-warning me-1", title: "Chỉnh sửa" do %>
                            <i class="bi bi-pencil"></i>
                            <% end %>
                            <% end %>

                            <%= link_to suggestion_path(s), data: { turbo_method: :delete, turbo_confirm: "Bạn có chắc muốn xóa góp ý này?" }, class: "btn btn-sm btn-outline-danger", title: "Xóa góp ý" do %>
                            <i class="bi bi-trash"></i>
                            <% end %>
                        </td>
                    </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    </div>
</div>
<% else %>
<div class="alert alert-info text-center shadow-sm mt-3">
    Bạn chưa gửi góp ý nào.
    <br>
    Nhấn vào nút <i class="bi bi-envelope-fill text-primary"></i> ở góc phải để gửi góp ý nhé!
</div>
<% end %>