<!-- Header -->
<div class="mb-4 d-flex flex-column flex-md-row justify-content-between align-items-center">
    <%= link_to "Quay lại", food_drinks_path, class: "btn btn-outline-secondary mb-2 mb-md-0" %>
    <h1 class="text-center flex-grow-1 mb-0">Danh sách góp ý</h1>
</div>

<!-- Card chứa table -->
<div class="card shadow-sm suggestions-card">
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover table-striped suggestions-table mb-0 align-middle">
                <thead class="table-dark">
                    <tr>
                        <th class="col-index">#</th>
                        <th class="col-title">Tên món / thức uống</th>
                        <th class="col-content">Nội dung góp ý</th>
                        <th class="col-status">Trạng thái</th>
                        <th class="col-date">Ngày gửi</th>
                        <th class="col-actions">Hành động</th>
                    </tr>
                </thead>
                <tbody>
                    <% if @suggestions.any? %>
                    <% @suggestions.each_with_index do |s, index| %>
                    <tr>
                        <th scope="row"><%= index + 1 %></th>
                        <td><%= s.title %></td>
                        <td><%= truncate(s.content, length: 50) %></td>
                        <td>
                            <% status_class, status_text = case s.status
                    when "pending" then ["badge bg-warning text-dark", "Đang chờ"]
                    when "approved" then ["badge bg-success", "Đã xác nhận"]
                    when "rejected" then ["badge bg-secondary", "Đã từ chối"]
                    else ["badge bg-secondary", "Không xác định"]
                  end %>
                            <span class="<%= status_class %>"><%= status_text %></span>
                        </td>
                        <td><%= s.created_at.strftime("%d/%m/%Y %H:%M") %></td>
                        <td class="col-actions">
                            <div class="action-buttons d-flex justify-content-center flex-wrap gap-2">
                                <%= link_to suggestion_path(s), class: "btn btn-sm btn-outline-info" do %>
                                <i class="bi bi-eye"></i> Xem
                                <% end %>
                                <% if s.status == "pending" %>
                                <%= link_to edit_suggestion_path(s), class: "btn btn-sm btn-outline-warning" do %>
                                <i class="bi bi-pencil"></i> Sửa
                                <% end %>
                                <% end %>
                                <%= link_to suggestion_path(s), data: { turbo_method: :delete, turbo_confirm: "Bạn có chắc muốn xóa góp ý này?" }, class: "btn btn-sm btn-outline-danger" do %>
                                <i class="bi bi-trash"></i> Xóa
                                <% end %>
                            </div>
                        </td>
                    </tr>
                    <% end %>
                    <% else %>
                    <tr>
                        <td colspan="6" class="text-center">Bạn chưa gửi góp ý nào.</td>
                    </tr>
                    <% end %>
                </tbody>
            </table>
        </div>
    </div>
</div>